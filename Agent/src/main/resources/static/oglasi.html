<!DOCTYPE html>
<html>
	<head>
	<script src="scripts/jquery-3.2.1.min.js"></script>
		<script src="scripts/tether.min.js"></script>
		<script src="scripts/bootstrap.min.js"></script>
		
		<style>
			table, th, td {
  				border: 1px solid black;
			}
			body {	
				background: linear-gradient(45deg, #fafbfc, #00FFFF);
			}

			.container{
				position: absolute;
				left: 10%;
				
			}
		</style>
		
		<meta charset="UTF-8">
		<title>Dodavanje oglasa</title>
		<script type="text/javascript">
		$(document).ready(function() {
		$("#add").click(function(){
			
			            formData=JSON.stringify({
			            	voziloSlodobnoOd:$("#input-form [name='pocetak']").val(),
			            	voziloSlobodnoDo:$("#input-form [name='kraj']").val()
			            });
				       $.ajax({
				        url: "http://localhost:8080/oglasi/dodaj", 
				   		type: "POST",
				   		data: formData,
				   		//saljemo json i ocekujemo json nazad
				   		contentType: "application/json",
				   		datatype: 'json',
				    	   success: function(data){
				    		   
				    		  
				    		   newRow = 
										"<tr>"
											+ "<td>" + data.agentID + "</td>"
											+ "<td>" + data.voziloID + "</td>"
											+ "<td>" + data.cenovnikID + "</td>"
											+ "<td>" + data.voziloSlodobnoOd + "</td>"
											+ "<td>" + data.voziloSlobodnoDo + "</td>"
											
										+ "</tr>"
										
									$("#oglas").append(newRow)
									
									
				    	   }
				      
				       });
				 });
		  });
		
		
		</script>
		<script>
		$(document).ready(function() {
			 $.ajax({
			        url: "http://localhost:8080/oglasi/nadji", 
			   		type: "GET",
			   		contentType: "application/json",
			   		datatype: 'json',
			    	   success: function(data){	   
			    		  for (var i=0; i<data.length; i++){
			    		   newRow = 
									"<tr>"
										+ "<td>" + data[i].agentID + "</td>"
										+ "<td>" + data[i].voziloID + "</td>"
										+ "<td>" + data[i].cenovnikID + "</td>"
										+ "<td>" + data[i].voziloSlodobnoOd + "</td>"
										+ "<td>" + data[i].voziloSlobodnoDo + "</td>"
									+ "</tr>"
									
								$("#oglas").append(newRow)						
			    	   }
			    	   }
			      
			       });
			 });
			
		</script>
	</head>
	<body>
	<div class="container">
		<div class="reg-parent "> <!-- mora da postoji parent div da bi child div bio u sredini -->
			<div class="reg">
				<form id="input-form">
					<div class="vertically">
						<label class="col-3">Vozilo je slobodno od:</label>
						<input class="col-9 form-control" type="text" name="pocetak" placeholder="Unesite datum">
					</div>
					
				    <div class="vertically">
						<label class="col-3">Vozilo je slobodno do:</label>
						<input class="col-9 form-control" type="text" name="kraj" placeholder="Unesite datum isteka">
					</div>
					<div class="vertically">
						<button type="button" id="add" class="btn btn-primary col-3">Potvrda</button>
					</div>
				</form>
			</div>
		</div>
		<h3 id="oglasNaslov"></h3>
		<table id="oglas" class = "table " style= "width:700px">
			<tr class="header">
				<th>id agenta</th>
				<th>id vozila</th>
				<th>id cenovnika</th>
				<th>slobodno vozilo od</th>
				<th>slobodno vozilo do</th>
			</tr>
			</table>
		</div>
	</body>
</html>