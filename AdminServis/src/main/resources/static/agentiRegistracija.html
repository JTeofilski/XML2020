<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
        <script src="scripts/jquery-3.2.1.min.js" type="text/javascript"></script>
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
		
		<title>Registracija</title>
		<script type="text/javascript">
		var url_string = window.location.href;
		var url = new URL(url_string);
		var id = url.searchParams.get("id");
		</script>
	</head>
	<body>
		<h1>Stranica za registraciju</h1>
		<p>Popunite podatke agenta/firme</p>
		<div class="reg-parent"> <!-- mora da postoji parent div da bi child div bio u sredini -->
			<div class="reg">
				<form id="inputForm">
					<div class="vertically">
						<label class="col-3">Ime:</label>
						<input class="col-9 form-control" name="ime" type="text" placeholder="Unesite ime">
					</div>
					<div class="vertically">
						<label class="col-3">Prezime:</label>
						<input class="col-9 form-control" name="prezime" type="text" placeholder="Unesite prezime">
					</div>
					<div class="vertically">
						<label class="col-3">Adresa:</label>
						<input class="col-9 form-control" name="adresa" type="text" placeholder="Unesite adresu">
					</div>
					<div class="vertically">
						<label class="col-3">Poslovni maticni broj:</label>
						<input class="col-9 form-control" name="maticniBroj" type="text" placeholder="Unesite poslovni maticni broj">
					</div>

					<div class="vertically">
						<button type="button" class="btn btn-primary col-3" id="registracija">Potvrda</button>
					</div>
				</form>
			</div>
		</div>
		<script type="text/javascript">
	  	$("#registracija").click(function() {
	  		 var formData = JSON.stringify({
	  	          ime:$("#inputForm [name='ime']").val(),
	  	          prezime:$("#inputForm [name='prezime']").val(),
	  	          adresa:$("#inputForm [name='adresa']").val(),
	  	          broj:$("#inputForm [name='maticniBroj']").val()
	  	          
	  	      });
	  		 
	  		$.ajax({
				url: "http://localhost:2020/adminservisapp/adminservlet/agenti/registruj/" + id,
				type: "PUT",
				data: formData,
				//saljemo json i ocekujemo json nazad
				contentType: "application/json",
				datatype: 'json',
				success: function(result){
					
					
				//alert("uspesna registracija!")
				window.location.href = "http://localhost:2020/adminservisapp/adminservlet/agenti.html";	 
				}
	  	});
	  	});
	  	</script>
	</body>
</html>